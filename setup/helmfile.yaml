repositories:
  - name: gitlab
    url: https://charts.gitlab.io
  - name: eks
    url: https://aws.github.io/eks-charts
  - name: ingress-nginx
    url: https://kubernetes.github.io/ingress-nginx
  - name: bitnami
    url: https://charts.bitnami.com/bitnami
  - name: jetstack
    url: https://charts.jetstack.io
  - name: awspca
    url: https://cert-manager.github.io/aws-privateca-issuer

environments:
  default:
    values:
    - environment: production

releases:
  - name: aws-load-balancer-controller
    installed: true
    chart: eks/aws-load-balancer-controller
    namespace: kube-system
    values:
      - aws-load-balancer-controller/values.yaml
  - name: aws-lb-serviceaccount
    installed: true
    chart: ./aws-lb-serviceaccount
    namespace: kube-system
    values:
      - controllerRoleARN: arn:aws:iam::135541436944:role/AmazonEKSLoadBalancerControllerRole
  - name: gitlab-agent
    installed: true
    namespace: gitlab-agent
    chart: gitlab/gitlab-agent
    values:
      - agent-config/values.yaml.gotmpl
    secrets:
      - agent-config/secrets.yaml
#  - name: gitlab-agent-frontend
#    namespace: gitlab-agent-frontend
#    chart: gitlab/gitlab-agent
#    values:
#      - agent-config/values.yaml.gotmpl
#    secrets:
#      - agent-config/secrets-frontend.yaml

  #  - name: cert-manager
  #    namespace: cert-manager
  #    chart: jetstack/cert-manager
  #    version: v1.9.1
  #    set:
  #      - name: installCRDs
  #        value: true
  #  - name: prometheus-operator
  #    chart: stable/prometheus-operator
